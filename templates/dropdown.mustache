{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template tool_dataflows/dropdown

    Drop down to add various step types

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Context variables required for this template:
    * label the text or html content of the main button
    * hastriggers whether or not the there were triggers provided
    * hasconnectors whether or not the there were connectors provided
    * hasflows whether or not the there were flows provided
    * items collection of known categories of step types (trigger, flow, connectors)

    Example context (json):
    { "status": "OK"}
}}
<span class="badge badge-secondary">{{status}}</span>

<div class="dropdown">
    <button
        class="btn btn-primary dropdown-toggle mb-3"
        type="button"
        id="tool_dataflows_dropdown"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="false">
        {{{label}}}
    </button>
    <div class="dropdown-menu" aria-labelledby="tool_dataflows_dropdown">
        <!-- triggers -->
        {{#hastriggers}}
            <h6 class="dropdown-header">{{#str}} stepgrouptriggers, tool_dataflows {{/str}}</h6>
            {{#items.triggers}}
            <a class="dropdown-item" href="{{{href}}}">{{label}}</a>
            {{/items.triggers}}
        {{/hastriggers}}

        <!-- connectors -->
        {{#hasconnectors}}
            <h6 class="dropdown-header">{{#str}} stepgroupconnectors, tool_dataflows {{/str}}</h6>
            {{#items.connectors}}
            <a class="dropdown-item" href="{{{href}}}">{{label}}</a>
            {{/items.connectors}}
        {{/hasconnectors}}

        <!-- connectorlogics -->
        {{#hasconnectorlogics}}
            <h6 class="dropdown-header">{{#str}} stepgroupconnectorlogics, tool_dataflows {{/str}}</h6>
            {{#items.connectorlogics}}
            <a class="dropdown-item" href="{{{href}}}">{{label}}</a>
            {{/items.connectorlogics}}
        {{/hasconnectorlogics}}

        <!-- readers -->
        {{#hasreaders}}
            <h6 class="dropdown-header">{{#str}} stepgroupreaders, tool_dataflows {{/str}}</h6>
            {{#items.readers}}
            <a class="dropdown-item" href="{{{href}}}">{{label}}</a>
            {{/items.readers}}
        {{/hasreaders}}

        <!-- flowlogics -->
        {{#hasflowlogics}}
            <h6 class="dropdown-header">{{#str}} stepgroupflowlogics, tool_dataflows {{/str}}</h6>
            {{#items.flowlogics}}
            <a class="dropdown-item" href="{{{href}}}">{{label}}</a>
            {{/items.flowlogics}}
        {{/hasflowlogics}}

        <!-- flowtransformers -->
        {{#hasflowtransformers}}
            <h6 class="dropdown-header">{{#str}} stepgroupflowtransformers, tool_dataflows {{/str}}</h6>
            {{#items.flowtransformers}}
            <a class="dropdown-item" href="{{{href}}}">{{label}}</a>
            {{/items.flowtransformers}}
        {{/hasflowtransformers}}

        <!-- writers -->
        {{#haswriters}}
            <h6 class="dropdown-header">{{#str}} stepgroupwriters, tool_dataflows {{/str}}</h6>
            {{#items.writers}}
            <a class="dropdown-item" href="{{{href}}}">{{label}}</a>
            {{/items.writers}}
        {{/haswriters}}
    </div>
</div>
